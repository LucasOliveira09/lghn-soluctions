<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" sizes="16k16" href="assets/logo.jpg">
    <title>Painel</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="/__/firebase/11.9.1/firebase-functions.js"></script>
    <script src="js/painel.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Adicione estilos para a transi√ß√£o da sidebar */
        .sidebar {
            transition: transform 0.3s ease-out;
        }

        .overlay {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(2px);
        }

        .table-card {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .table-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .table-status-free {
            background-color: #d1fae5; /* Green-100 */
            border-color: #34d399; /* Green-500 */
        }

        .table-status-occupied {
            background-color: #fee2e2; /* Red-100 */
            border-color: #ef4444; /* Red-500 */
        }
        /* Custom scrollbar for some sections */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>

<body id="tudoSome" class="bg-gray-100 min-h-screen flex" style="display: none;">
    <div id="overlay" class="fixed inset-0 bg-black-200 z-40 hidden"></div>

    <div id="sidebar"
        class="fixed top-0 left-0 w-64 h-full bg-blue-800 text-white z-50 transform -translate-x-full lg:translate-x-0 overflow-y-auto shadow-lg p-4 flex flex-col">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">Menu</h2>
            <button id="close-sidebar-button" class="lg:hidden text-white text-xl">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div id="menu-buttons" class="flex flex-col gap-3">
            <button id="btn-ativos"
                class="py-3 px-4 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition w-full text-left">
                <i class="fas fa-clipboard-list mr-2"></i> Pedidos Ativos
            </button>

            <button id="btn-finalizados"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-check-circle mr-2"></i> Pedidos Finalizados
            </button>



            <button id="btn-editar-cardapio"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-edit mr-2"></i> Editar Card√°pio
            </button>

            <button id="btn-gerenciar-adicionais"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-edit mr-2"></i> Adicionais
            </button>

            <button id="btn-editar-horario"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-clock mr-2"></i> Editar Hor√°rio
            </button>

            <button id="btn-gerenciar-mesas"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-chair mr-2"></i> Gerenciar Mesas
            </button>

            <button id="btn-configuracoes-gerais"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fa-duotone fa-solid fa-comment mr-2"></i> Recuperar clientes
            </button>

            <button id="btn-relatorios"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-chart-line mr-2"></i> Relat√≥rios
            </button>

            <!--Add Cupom -->
            <button id="btn-gerenciar-cupom"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fa-solid fa-ticket-simple"></i> Gerenciar Cupons
            </button>

            <button id="btn-gerenciar-estoque"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-warehouse mr-2"></i> Gerenciar Estoque
            </button>

            <!--Add Gar√ßom-->
            <button id="btn-gerenciar-garcom"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fa-solid fa-address-card"></i> Gerenciar Gar√ßom
            </button>

        </div>

        <div class="mt-auto">
             <button id="btn-logout"
                class="py-3 px-4 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700 transition w-full text-left">
                <i class="fas fa-sign-out-alt mr-2"></i> Sair
            </button>
        </div>
    </div>

    <div class="flex-1 lg:ml-64 p-4 sm:p-6 flex flex-col">
        <div class="max-w-7xl w-full mx-auto">
            <div class="flex items-center justify-between mb-8 gap-4">
                <button id="menu-button" class="lg:hidden text-blue-700 text-3xl">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="text-3xl sm:text-4xl font-bold text-blue-700 text-center sm:text-left flex-1">
                    LGHN SYSTEM
                </h1>
                <audio id="notificacao-som" src="assets/notificacao.mp3" preload="auto"></audio>
            </div>

            <div id="aba-ativos">
                <div class="flex justify-between items-center mb-4 border-b pb-2 border-gray-300">
                    <h2 class="text-xl sm:text-2xl font-semibold text-gray-700">Pedidos Ativos</h2>
                    <button id="btn-adicionar-pedido-manual" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2">
                        <i class="fas fa-plus"></i> Adicionar Pedido
                    </button>
                </div>
                <div id="pedidos-ativos-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3"></div>
            </div>

            <div id="modal-editar-pedido"
                class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6 relative mx-4 overflow-y-auto max-h-[90vh]">
                    <h2 class="text-xl font-bold mb-4">Editar Pedido <span id="modal-pedido-id"></span></h2>

                    <div id="modal-itens" class="space-y-2 mb-4 border p-2 rounded"></div>

                    <div class="bg-gray-100 p-3 rounded mt-4">
                        <h3 class="font-medium mb-2">Adicionar novo item</h3>
                        <div class="flex flex-col md:flex-row gap-2 mb-2">
                            <input id="novo-item-nome" type="text" placeholder="Nome do produto"
                                class="flex-1 border p-2 rounded" />
                            <input id="novo-item-preco" type="number" min="0" step="0.01"
                                placeholder="Pre√ßo unit√°rio" class="w-28 border p-2 rounded" />
                            <input id="novo-item-quantidade" type="number" min="0" value="1"
                                class="w-24 border p-2 rounded text-center" />
                        </div>
                        <button id="btn-adicionar-item"
                            class="bg-blue-500 text-white px-4 py-2 rounded w-full mt-2">+ Adicionar Item</button>
                    </div>

                    <div class="flex justify-end gap-2 mt-6">
                        <button type="button" onclick="fecharModalEditarPedido()"
                            class="bg-gray-400 text-white px-4 py-2 rounded">Cancelar</button>
                        <button id="btn-salvar-pedido" class="bg-green-600 text-white px-4 py-2 rounded" onclick="salvarPedidoEditado()">Salvar
                            Altera√ß√µes</button>
                    </div>
                </div>
            </div>

           <div id="modal-pedido-manual" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-[99]">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-5xl p-6 overflow-y-auto max-h-[95vh] animate-fade-in">
        <div class="flex justify-between items-center mb-4 border-b pb-2">
            <h2 class="text-2xl font-bold text-gray-800">Criar Novo Pedido</h2>
            <button id="manual-btn-fechar" class="text-gray-500 hover:text-red-600 text-3xl">&times;</button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="flex flex-col gap-4">
                <h3 class="text-lg font-semibold text-gray-800 border-t pt-4">Adicionar Itens ao Pedido</h3>

                <div class="flex flex-wrap items-end gap-3">
                    <div class="flex-grow" style="min-width: 200px;">
                        <label for="manual-select-categoria" class="block text-sm font-medium text-gray-700">Categoria:</label>
                        <select id="manual-select-categoria" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </select>
                    </div>
                    <div>
                        <label for="manual-qtd-produto" class="block text-sm font-medium text-gray-700">Qtd:</label>
                        <input type="number" id="manual-qtd-produto" value="1" min="1" class="mt-1 block w-20 p-2 border border-gray-300 rounded-md text-center">
                    </div>
                </div>

                <div id="container-montagem-pizza" class="w-full bg-blue-50 p-4 rounded-lg border border-blue-200 hidden">
                    <h4 class="font-bold text-blue-800 mb-3">Montar Pizza</h4>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="pizza-tamanho" class="block text-sm font-medium text-gray-700">Tamanho:</label>
                            <select id="pizza-tamanho" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                                <option value="Grande">Grande</option>
                                <option value="Broto">Broto</option>
                            </select>
                        </div>
                        <div>
                            <label for="pizza-borda" class="block text-sm font-medium text-gray-700">Borda:</label>
                            <select id="pizza-borda" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                            </select>
                        </div>
                        <div class="sm:col-span-2">
                            <label for="pizza-sabor1" class="block text-sm font-medium text-gray-700">1¬∫ Sabor:</label>
                            <select id="pizza-sabor1" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                            </select>
                        </div>
                        <div class="sm:col-span-2 flex items-center gap-2">
                            <input type="checkbox" id="pizza-meio-a-meio-check" class="form-checkbox h-4 w-4 text-blue-600 rounded">
                            <label for="pizza-meio-a-meio-check" class="text-sm font-medium text-gray-700">Adicionar 2¬∫ sabor (Meio a Meio)</label>
                        </div>
                        <div id="container-sabor2" class="sm:col-span-2 hidden">
                            <label for="pizza-sabor2" class="block text-sm font-medium text-gray-700">2¬∫ Sabor:</label>
                            <select id="pizza-sabor2" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                            </select>
                        </div>
                    </div>
                </div>

                <div id="container-outros-itens" class="w-full hidden">
                    <label for="manual-select-produto" class="block text-sm font-medium text-gray-700">Produto:</label>
                    <select id="manual-select-produto" class="mt-1 block w-full p-2 border border-gray-300 rounded-md"></select>
                </div>

                <button id="manual-btn-add-item" class="w-full mt-4 px-4 py-2 bg-blue-600 text-white font-bold rounded-md hover:bg-blue-700">Adicionar Item ao Pedido</button>
            </div>

            <div class="flex flex-col gap-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="manual-nome-cliente" class="block text-sm font-medium text-gray-700">Nome do Cliente:</label>
                        <input type="text" id="manual-nome-cliente" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="Nome do Cliente">
                    </div>
                    <div>
                        <label for="manual-telefone" class="block text-sm font-medium text-gray-700">Telefone:</label>
                        <input type="tel" id="manual-telefone" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="(99) 99999-9999">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="21" class="block text-sm font-medium text-gray-700">Tipo de Entrega:</label>
                        <select id="manual-tipo-entrega" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                            <option value="Retirada">Retirada no Local</option>
                            <option value="Entrega">Entrega</option>
                        </select>
                    </div>
                    <div>
                        <label for="manual-pagamento" class="block text-sm font-medium text-gray-700">Forma de Pagamento:</label>
                        <select id="manual-pagamento" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                            <option value="Dinheiro">Dinheiro</option>
                            <option value="Cart√£o">Cart√£o</option>
                            <option value="Pix">Pix</option>
                        </select>
                    </div>
                </div>

                <div id="container-endereco" class=" grid-cols-1 sm:grid-cols-2 gap-4 hidden bg-gray-50 p-4 rounded-lg border border-gray-200">
    <h4 class="sm:col-span-2 font-bold text-gray-800 mb-2">Detalhes da Entrega</h4>
    <div>
        <label for="manual-input-rua" class="block text-sm font-medium text-gray-700">Rua:</label>
        <input type="text" id="manual-input-rua" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="Rua do Cliente">
    </div>
    <div>
        <label for="manual-input-numero" class="block text-sm font-medium text-gray-700">N√∫mero:</label>
        <input type="text" id="manual-input-numero" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="N√∫mero">
    </div>
    <div class="sm:col-span-2">
        <label for="manual-input-bairro" class="block text-sm font-medium text-gray-700">Bairro:</label>
        <input type="text" id="manual-input-bairro" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="Bairro">
    </div>
</div>

                <div>
                    <h3 class="text-lg font-semibold mb-2">Itens no Pedido:</h3>
                    <div id="manual-itens-lista" class="space-y-2 max-h-48 overflow-y-auto border p-3 rounded bg-gray-50">
                        <p class="text-gray-500">Nenhum item adicionado.</p>
                    </div>
                    <p class="text-right text-2xl font-bold mt-4 text-green-600">Total: <span id="manual-total-pedido">R$ 0.00</span></p>
                </div>
            </div>
        </div>

        <div class="flex justify-end gap-4 mt-6 border-t pt-4">
            <button id="manual-btn-cancelar" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded">Cancelar</button>
            <button id="manual-btn-salvar" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Salvar Pedido</button>
        </div>
        
    </div>

    
</div>




            <div id="aba-finalizados" class="hidden">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
                    Relat√≥rio de Pedidos Finalizados</h2>

                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <div class="flex flex-col sm:flex-row gap-4 mb-6">
                        <div class="flex flex-col flex-1">
                            <span class="font-medium text-sm mb-1">De:</span>
                            <input type="date" id="data-inicio"
                                class="border rounded px-4 py-2 focus:ring-2 ring-blue-400 w-full" />
                        </div>
                        <div class="flex flex-col flex-1">
                            <span class="font-medium text-sm mb-1">At√©:</span>
                            <input type="date" id="data-fim"
                                class="border rounded px-4 py-2 focus:ring-2 ring-blue-400 w-full" />
                        </div>
                        <button id="btn-filtrar"
                            class="bg-blue-600 text-white px-6 py-2 mt-2 sm:mt-0 rounded-lg font-semibold hover:bg-blue-700 w-full sm:w-auto">Filtrar</button>
                    </div>
                    <div class="flex flex-wrap gap-2">
                        <button id="btn-ontem-finalizados"
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Ontem</button>
                        <button id="btn-ultimos-7-dias-finalizados"
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimos 7
                            Dias</button>
                        <button id="btn-ultimo-mes-finalizados"
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimo M√™s</button>
                        <button id="btn-ultimos-3-meses-finalizados"
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimos 3
                            Meses</button>
                    </div>
                </div>
                
                <div
                    class="bg-white p-4 rounded-lg shadow-md flex flex-col sm:flex-row justify-between text-lg font-medium mb-6">
                    <p><strong>Total de pedidos:</strong> <span id="total-pedidos">0</span></p>
                    <p><strong>Total vendido:</strong> R$ <span id="total-vendido">0.00</span></p>
                </div>

                <div id="pedidos-finalizados-container"
                    class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3">

                </div>
            </div>

            <div id="promocoes" class="hidden">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
                    Adicionar Promo√ß√µes</h2>

                <form id="promoForm" class="bg-white shadow-md rounded-xl p-4 space-y-4 border border-gray-200 mb-8">
                    <h2 class="text-lg font-bold text-gray-800 mb-2">Adicionar Nova Promo√ß√£o</h2>

                    <div>
                        <label for="titulo">T√≠tulo</label>
                        <input type="text" id="titulo" class="w-full p-3 border rounded" required>
                    </div>

                    <div>
                        <label for="descricao">Descri√ß√£o</label>
                        <textarea id="descricao" class="w-full p-3 border rounded" required></textarea>
                    </div>

                    <div>
                        <label for="imagemUrl">URL da Imagem</label>
                        <input type="text" id="imagemUrl" class="w-full p-2 border rounded"
                            placeholder="https://exemplo.com/imagem.jpg" required>
                        <img id="imagemPreview" class="mt-2 max-h-40 rounded border hidden" />
                    </div>

                    <div>
                        <label for="preco">Pre√ßo</label>
                        <input type="" id="preco" class="w-full p-3 border rounded" required>
                    </div>

                    <button type="submit" class="bg-green-600 text-white py-2 px-4 rounded">Salvar Promo√ß√£o</button>
                </form>


                <div id="modal-editar"
                    class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                    <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-4 sm:p-6 relative mx-4">
                        <h2 class="text-lg font-bold mb-4">Editar Promo√ß√£o</h2>
                        <form id="form-editar" class="space-y-3">
                            <input type="text" id="edit-titulo" class="w-full border p-2 rounded" placeholder="T√≠tulo"
                                required>
                            <textarea id="edit-descricao" class="w-full border p-2 rounded" placeholder="Descri√ß√£o"
                                required></textarea>
                            <div>
                                <label for="imagemUrl" class="block text-sm font-medium mb-1">URL da Imagem</label>
                                <input type="text" id="imagemUrl" class="w-full p-2 border rounded"
                                    placeholder="https://exemplo.com/imagem.jpg" required>
                                <img id="imagemPreview" class="mt-2 max-h-40 rounded border hidden"
                                    alt="Preview da imagem" />
                            </div>
                            <input type="file" id="edit-imagemUpload" accept="image/*"
                                class="w-full p-2 border rounded focus:ring-2 ring-green-500">
                            <img id="preview-edit-imagem" src="" class="max-h-32 mt-2 rounded hidden"
                                alt="Preview da imagem" />
                            <input type="number" id="edit-preco" class="w-full border p-2 rounded" placeholder="Pre√ßo"
                                required>
                            <div class="flex justify-end gap-2 mt-4">
                                <button type="button" onclick="fecharModal()"
                                    class="bg-gray-400 text-white px-4 py-2 rounded">Cancelar</button>
                                <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded">Salvar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="editar-cardapio" class="hidden bg-gray-100 p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2 border-gray-300">Edi√ß√£o de Itens do
                    Card√°pio</h2>

                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                    <button onclick="mostrarNovoitem()" id="btn-adicionar-item-cardapio"
                        class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-3 rounded font-semibold transition">
                        + Adicionar Novo Item
                    </button>

                    <div class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
                        <div class="w-full sm:w-auto">
                            <label for="categoria-select" class="block text-sm font-medium text-gray-700 mb-1">Escolha
                                a categoria:</label>
                            <select id="categoria-select"
                                class="w-full sm:w-64 p-2 border rounded focus:ring-2 ring-blue-400 transition">
                                <option value="pizzas">Pizzas</option>
                                <option value="bebidas">Bebidas</option>
                                <option value="esfirras">Esfirras</option>
                                <option value="calzone">Calzones</option>
                                <option value="promocoes">üî• Promo√ß√µes</option>
                                <option value="novidades">‚ú® Novidades</option>
                            </select>
                        </div>
                        <div class="w-full sm:w-auto">
                            <label for="search-input" class="block text-sm font-medium text-gray-700 mb-1">Pesquisar
                                item:</label>
                            <input type="text" id="search-input" placeholder="Buscar por nome ou descri√ß√£o..."
                                class="w-full sm:w-64 p-2 border rounded focus:ring-2 ring-blue-400 transition" />
                        </div>
                    </div>
                </div>

                <div id="modal-novo-item"
                    class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                    <div class="bg-white p-6 rounded-xl shadow-xl w-full max-w-md mx-4">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Adicionar Novo Item</h2>

                        <div class="space-y-4">
                            <div>
                                <label for="novo-categoria-select" class="block font-medium text-sm text-gray-700 mb-1">
                                    Categoria Principal
                                </label>
                                <select id="novo-categoria-select" class="w-full border rounded p-2 focus:ring-2 ring-blue-500">
                                    <option value="pizzas">Pizzas</option>
                                    <option value="esfirras">Esfirras</option>
                                    <option value="calzone">Calzones</option>
                                    <option value="bebidas">Bebidas</option>
                                    <option value="promocoes">üî• Promo√ß√µes</option>
                                    <option value="novidades">‚ú® Novidades</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="novo-nome"
                                    class="block font-medium text-sm text-gray-700 mb-1">Nome</label>
                                <input id="novo-nome" type="text"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500"
                                    placeholder="Nome do produto" />
                            </div>

                            <div>
                                <label for="novo-descricao"
                                    class="block font-medium text-sm text-gray-700 mb-1">Descri√ß√£o</label>
                                <textarea id="novo-descricao"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500" rows="3"
                                    placeholder="Descri√ß√£o do produto"></textarea>
                            </div>

                            <div>
                                <label for="novo-preco"
                                    class="block font-medium text-sm text-gray-700 mb-1">Pre√ßo</label>
                                <input id="novo-preco" type="number" step="0.01" min="0"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500" placeholder="0.00" />
                            </div>

                            <div>
                                <label for="novo-imagem" class="block font-medium text-sm text-gray-700 mb-1">URL da
                                    Imagem</label>
                                <input id="novo-imagem" type="text"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500"
                                    placeholder="https://..." />
                                <img id="preview-nova-imagem" class="w-full h-32 object-cover mt-2 rounded border hidden" />
                            </div>

                            <div>
                                <label for="novo-tipo"
                                    class="block font-medium text-sm text-gray-700 mb-1">Tipo</label>
                                <select id="novo-tipo"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500">
                                    <option value="salgado">Salgado</option>
                                    <option value="doce">Doce</option>
                                </select>
                            </div>

                            <div class="flex items-center">
                                <input type="checkbox" id="novo-ativo" class="form-checkbox text-blue-600" checked />
                                <label for="novo-ativo" class="ml-2 text-sm text-gray-700">Ativo</label>
                            </div>

                            <div class="flex justify-between pt-4 border-t mt-4">
                                <button id="btn-fechar-novo-item"
                                    class="bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded transition">
                                    Fechar
                                </button>
                                <button id="btn-salvar-novo-item"
                                    class="bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded font-semibold transition">
                                    Salvar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="itens-cardapio-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 "></div>
            </div>

            <div id="editar-horario" class="hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2 border-gray-300">Edi√ß√£o de Hor√°rio de
                    Funcionamento</h2>

                <div class="max-w-2xl mx-auto mt-10 p-6 bg-white rounded shadow">
                    <h1 class="text-2xl font-bold mb-4">Configurar Hor√°rio de Funcionamento</h1>
                    <p class="mb-4 text-gray-700" id="status">Carregando status...</p>

                    <form id="horario-form" class="space-y-4">
                        <div id="dias-container" class="space-y-3"></div>

                        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                            Salvar hor√°rios
                        </button>
                    </form>
                </div>
                
                <div id="whatsapp-settings-section" class="p-6 bg-white rounded-lg shadow-md mt-6">
    <h3 class="text-2xl font-semibold mb-4 text-gray-800">Gerenciamento de WhatsApp</h3>
    
    <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700">Restaurante Atual:</label>
        <span id="current-restaurant-id-display" class="text-lg font-bold text-blue-700">Carregando...</span>
        <input type="hidden" id="hidden-current-restaurant-id" value="">
    </div>

    <hr class="my-6 border-t border-gray-200">

    <div class="flex flex-col md:flex-row items-center justify-around gap-8 mb-8 p-6 border rounded-lg bg-indigo-50">
        <div class="flex-1 text-center min-w-0">
            <h4 class="text-xl font-medium mb-3 text-indigo-800">Status da Conex√£o WhatsApp</h4>
            <p id="whatsapp-session-status" class="text-lg font-bold text-indigo-700">Carregando status...</p>
            <p id="whatsapp-phone-number" class="text-gray-700 text-sm mt-1">N√∫mero Conectado: N/A</p>
            <p id="whatsapp-last-update" class="text-gray-600 text-xs mt-2">√öltima atualiza√ß√£o: N/A</p>
        </div>
        <div class="flex-1 text-center flex flex-col items-center justify-center min-w-0">
            <h4 class="text-xl font-medium mb-3 text-indigo-800">QR Code para Conex√£o</h4>
            <img id="qr-code-display" src="" alt="QR Code WhatsApp" class="w-56 h-56 mx-auto border-4 border-gray-300 rounded-lg p-2 bg-white hidden">
            <button id="btn-connect-whatsapp" class="mt-5 bg-indigo-600 text-white px-8 py-3 rounded-full shadow-lg hover:bg-indigo-700 transition duration-200 text-base font-semibold">
                Conectar/Verificar WhatsApp
            </button>
            <p class="text-sm text-gray-500 mt-2">Escaneie com o app WhatsApp Business do celular.</p>
        </div>
    </div>

    <hr class="my-6 border-t border-gray-200">

    <h4 class="text-2xl font-semibold mb-4 text-gray-800">Enviar Mensagem Manual (Teste)</h4>
    <div class="flex flex-col gap-5 p-6 border rounded-lg bg-blue-50">
        <input type="text" id="manual-message-phone" placeholder="N√∫mero do Cliente (ex: 5511987654321)" class="p-3 border border-blue-300 rounded-md text-gray-800 focus:ring-blue-500 focus:border-blue-500">
        <textarea id="manual-message-text" rows="4" placeholder="Digite a mensagem aqui... (Suporta *negrito*, _it√°lico_, ~riscado~)" class="p-3 border border-blue-300 rounded-md text-gray-800 focus:ring-blue-500 focus:border-blue-500"></textarea>
        <button id="btn-send-manual-message" class="bg-blue-600 text-white px-8 py-3 rounded-full shadow-lg hover:bg-blue-700 transition duration-200 text-base font-semibold">
            Enviar Mensagem
        </button>
        <p class="text-sm text-gray-600">Use este campo para testes ou mensagens avulsas.</p>
    </div>
</div>
            </div>

            <div id="aba-gerenciar-mesas" class="hidden">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
                    Gerenciar Mesas para Atendimento Presencial</h2>

                <div class="mb-6">
                    <label for="num-mesas" class="block text-sm font-medium text-gray-700 mb-2">N√∫mero de Mesas (1 a 20):</label>
                    <div class="flex gap-2">
                        <input type="number" id="num-mesas" min="1" max="20" value="10"
                            class="w-24 p-2 border rounded-md focus:ring-blue-500 focus:border-blue-500">
                        <button id="btn-configurar-mesas" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                            Configurar Mesas
                        </button>
                    </div>
                </div>

                <div id="mesas-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    </div>
            </div>

            <div id="modal-mesa-detalhes" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg w-full max-w-4xl p-6 relative mx-4 overflow-y-auto max-h-[90vh]">
                    <h2 class="text-2xl font-bold mb-4">Mesa <span id="modal-mesa-numero"></span> - Fechar Conta</h2>
                    <button type="button" class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-3xl close-modal">
    <i class="fas fa-times"></i>
</button>

                    <div id="mesa-detalhes-info" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700 mb-6">
                        <p><strong>Status:</strong> <span id="mesa-detalhes-status" class="font-semibold"></span></p>
                        <p><strong>Cliente:</strong> <span id="mesa-detalhes-cliente"></span></p>
                        <p><strong>Gar√ßom:</strong> <span id="mesa-detalhes-garcom"></span></p>
                        <p class="md:col-span-2"><strong>Observa√ß√µes:</strong> <span id="mesa-detalhes-obs"></span></p>
                    </div>

                    <hr class="my-4">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Itens Pendentes:</h3>
                            <div id="mesa-itens-selecao-container" class="space-y-3 mb-4 border p-3 rounded-md bg-gray-50 max-h-80 overflow-y-auto custom-scrollbar">
                                <p class="text-gray-500 text-center" id="empty-items-message">Todos os itens foram pagos ou n√£o h√° itens no pedido.</p>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold mb-3">Detalhes do Pagamento:</h3>
                            <div class="bg-blue-50 p-4 rounded-md mb-4 border border-blue-200">
                                <p class="text-lg font-bold text-blue-800">Total Original da Mesa: <span id="mesa-total-original">R$ 0.00</span></p>
                                <p class="text-lg font-bold text-green-600">Total J√° Pago: <span id="mesa-total-pago">R$ 0.00</span></p>
                                <p class="text-lg font-bold text-red-600">Restante a Pagar: <span id="mesa-restante-pagar">R$ 0.00</span></p>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <label for="valor-a-pagar-input" class="block text-sm font-medium text-gray-700">Valor desta Parcela:</label>
                                    <input type="number" id="valor-a-pagar-input" min="0" step="0.01" placeholder="R$ 0.00"
                                           class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-lg font-bold text-blue-700">
                                </div>
                                <div class="flex gap-2">
                                    <input type="number" id="dividir-por-input" min="1" placeholder="N¬∫ Pessoas"
                                           class="flex-1 mt-1 block p-2 border border-gray-300 rounded-md">
                                    <button id="btn-dividir-restante" class="px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50" disabled>
                                        Dividir
                                    </button>
                                </div>
                                <div>
                                    <label for="pagamento-metodo-atual" class="block text-sm font-medium text-gray-700">M√©todo de Pagamento:</label>
                                    <select id="pagamento-metodo-atual" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                                        <option value="">Selecione...</option>
                                        <option value="Pix">Pix</option>
                                        <option value="Cart√£o">Cart√£o</option>
                                        <option value="Dinheiro">Dinheiro</option>
                                    </select>
                                </div>
                                <div id="troco-input-group" class="hidden">
                                    <label for="troco-recebido" class="block text-sm font-medium text-gray-700">Valor Recebido (para troco):</label>
                                    <input type="number" id="troco-recebido" min="0" step="0.01" placeholder="Ex: 50.00"
                                        class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                                </div>
                                <button id="btn-adicionar-pagamento" class="px-5 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 w-full disabled:opacity-50" disabled>
                                    <i class="fas fa-cash-register mr-2"></i> Adicionar Pagamento
                                </button>
                            </div>

                            <h3 class="text-xl font-semibold mt-6 mb-3">Hist√≥rico de Pagamentos:</h3>
                            <div id="historico-pagamentos" class="space-y-2 mb-4 border p-3 rounded-md bg-gray-50 max-h-40 overflow-y-auto custom-scrollbar">
                                <p class="text-gray-500 text-center" id="empty-payments-message">Nenhum pagamento registrado.</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center gap-3 mt-6 border-t pt-4">
                        <button id="btn-cancelar-pedido-mesa" class="px-5 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 font-bold">
                            <i class="fas fa-ban mr-2"></i> Cancelar Pedido
                        </button>
                        <button id="btn-finalizar-conta-mesa" class="px-5 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-bold disabled:opacity-50" disabled>
                            <i class="fas fa-check-circle mr-2"></i> Finalizar Conta
                        </button>
                    </div>
                </div>
            </div>

            
            <div id="modal-menu-link" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-xl w-11/12 md:w-1/3 relative">
        <button class="close-modal absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
        <h3 class="text-xl font-semibold mb-4 text-gray-800">Configurar Link do Card√°pio</h3>
        <div class="mb-4">
            <label for="menu-link-input" class="block text-sm font-medium text-gray-700 mb-1">URL do Card√°pio:</label>
            <input type="url" id="menu-link-input" placeholder="https://seucardapio.com/link"
                   class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
        </div>
        <button id="btn-salvar-menu-link" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
            Salvar Link
        </button>
    </div>
</div>

<div id="aba-configuracoes-gerais" class="hidden">
    <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
        Recuperar clientes
    </h2>
    <div class="bg-white p-6 rounded shadow-md mb-6">
        <p class="text-gray-600">Mande mensagens a clientes inativos...</p>
        <div class="mt-4">
            <button id="btn-abrir-modal-menu-link" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition">
                Configurar Link do Card√°pio
            </button>
        </div>
    </div>

    <div class="bg-white p-6 rounded shadow-md mt-6">
        <h3 class="text-lg font-semibold mb-4 text-gray-800 border-b pb-2">Gerenciamento de Clientes Inativos</h3>
        <div class="mb-4">
            <label for="dias-inatividade" class="block text-sm font-medium text-gray-700">Considerar inativo ap√≥s (dias):</label>
            <input type="number" id="dias-inatividade" value="15" min="1" class="mt-1 block w-24 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
        </div>
        <button id="btn-verificar-inativos" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-200">
            Verificar Clientes Inativos
        </button>
        <div id="clientes-inativos-container" class="mt-6 border-t pt-4">
            <p class="text-gray-600">Clique em "Verificar Clientes Inativos" para listar os clientes.</p>
        </div>
    </div>
</div>

            <div id="aba-relatorios" class="hidden">
    <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
        Relat√≥rios de Vendas
    </h2>

    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-lg font-semibold mb-4 text-gray-700">Filtro de Per√≠odo</h3>
        <div class="flex flex-wrap items-end gap-4 mb-4">
            <div class="flex-1 min-w-[150px]">
                <label for="relatorio-data-inicio" class="block text-sm font-medium text-gray-700">Data
                    In√≠cio:</label>
                <input type="date" id="relatorio-data-inicio"
                    class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div class="flex-1 min-w-[150px]">
                <label for="relatorio-data-fim" class="block text-sm font-medium text-gray-700">Data
                    Fim:</label>
                <input type="date" id="relatorio-data-fim"
                    class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>
            <button id="btn-gerar-relatorios"
                class="mt-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                Gerar Relat√≥rios
            </button>
        </div>

        <div class="flex flex-wrap gap-2 mt-4">
            <button id="btn-hoje"
                class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Ontem</button>
            <button id="btn-ultimos-7-dias"
                class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimos 7
                Dias</button>
            <button id="btn-ultimo-mes"
                class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimo M√™s</button>
            <button id="btn-ultimos-3-meses"
                class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimos 3
                Meses</button>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-lg font-semibold mb-4 text-gray-700">Top Produtos Vendidos</h3>
            <div id="top-produtos-summary" class="mb-4 text-gray-800"></div>
            <div class="relative h-80">
                <canvas id="top-produtos-chart"></canvas>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-lg font-semibold mb-4 text-gray-700">Vendas por Dia da Semana</h3>
            <div id="vendas-por-dia-summary" class="mb-4 text-gray-800"></div>
            <div class="relative h-80">
                <canvas id="vendas-por-dia-chart"></canvas>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-lg font-semibold mb-4 text-gray-700">Pessoas que Mais Compraram</h3>
            <div id="top-clientes-summary" class="mb-4 text-gray-800"></div>
            <div class="relative h-80">
                <canvas id="top-clientes-chart"></canvas>
            </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-lg font-semibold mb-4 text-gray-700">Hor√°rios de Pico</h3>
            <div id="horarios-pico-summary" class="mb-4 text-gray-800"></div>
            <div class="relative h-80">
                <canvas id="horarios-pico-chart"></canvas>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-lg font-semibold mb-4 text-gray-700">M√©todos de Pagamento</h3>
            <div id="metodos-pagamento-summary" class="mb-4 text-gray-800"></div>
            <div class="relative h-80">
                <canvas id="metodos-pagamento-chart"></canvas>
            </div>
        </div>
         <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-lg font-semibold mb-4 text-gray-700">Pedidos por Tipo de Entrega</h3>
            <div id="tipos-entrega-summary" class="mb-4 text-gray-800"></div>
            <div class="relative h-80">
                <canvas id="tipos-entrega-chart"></canvas>
            </div>
        </div>
    </div>
</div>

            <!--Cupons-->
            <div id="aba-gerenciar-cupom" class="hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2 border-gray-300">Editar Cupons</h2>
                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">Cadastrar Novo Cupom</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="cupom-codigo" class="block text-sm font-medium text-gray-700">C√≥digo do Cupom:</label>
                            <input type="text" id="cupom-codigo" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 uppercase-input" placeholder="EX: DESCONTO">
                        </div>
                        <div>
                            <label for="cupom-valor" class="block text-sm font-medium text-gray-700">Valor do Desconto (%<!-- ou  R$ -->):</label>
                            <input type="number" id="cupom-valor" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="10%">
                        </div>
                        <div>
                            <label for="cupom-tipo" class="block text-sm font-medium text-gray-700">Tipo de Desconto:</label>
                            <select id="cupom-tipo" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                <option value="porcentagem">Porcentagem (%)</option>
                                <!-- <option value="valor">Valor Fixo (R$)</option> -->
                            </select>
                        </div>
                        <div>
                            <label for="cupom-min-valor" class="block text-sm font-medium text-gray-700">Valor M√≠nimo do Pedido (opcional):</label>
                            <input type="number" id="cupom-min-valor" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" placeholder="Ex 10.00">
                        </div>
                        <div>
                            <label for="validade-cupom" class="block text-sm font-medium text-gray-700">Validade do Cupom:</label>
                            <input type="date" id="validade-cupom" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" placeholder="00/00/0000">
                        </div>
                    </div>
                    <div class="flex justify-end mt-4">
                        <button id="btn-salvar-cupom" onclick="salvarCupom()" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700">
                            Salvar Cupom
                        </button>
                    </div>
                </div>

                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">Cupons Cadastrados</h3>
                    <div id="lista-cupons-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3"></div>
                </div>
            </div>
            <!-- Gar√ßom -->
           <div id="aba-gerenciar-garcom" class="hidden p-6 bg-white rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2 border-gray-300">Gerenciar Gar√ßons</h2>
                
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-8">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">Adicionar Novo Gar√ßom</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="garcom-nome" class="block text-sm font-medium text-gray-700">Nome do Gar√ßom:</label>
                            <input type="text" id="garcom-nome" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Ex: Lucas">
                        </div>
                        <div>
                            <label for="garcom-senha" class="block text-sm font-medium text-gray-700">Senha (m√≠n. 6 caracteres):</label>
                            <input type="password" id="garcom-senha" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="********">
                        </div>
                    </div>
                    <div class="flex justify-end mt-4">
                        <button id="btn-salvar-garcom" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 flex items-center justify-center">
                            <span id="btn-salvar-garcom-text">Salvar Gar√ßom</span>
                            <i id="btn-salvar-garcom-spinner" class="fas fa-spinner fa-spin ml-2 hidden"></i>
                        </button>
                    </div>
                </div>

                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">Gar√ßons Cadastrados</h3>
                    <div id="lista-garcons-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3">
                        <div id="lista-garcons-spinner" class="col-span-full text-center p-4">
                            <i class="fas fa-spinner fa-spin text-blue-500 text-3xl"></i>
                            <p class="text-gray-600 mt-2">Carregando gar√ßons...</p>
                        </div>
                    </div>
                </div>
            </div>
        
    <!-- Estoque -->
      <div id="aba-gerenciar-estoque" class="hidden">
    <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
        Estoque Inteligente: An√°lise e Gerenciamento
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-bold mb-4 text-gray-800">üìä Consumo de ONTEM (<span id="data-dia-anterior">Carregando...</span>)</h3>
            <p class="text-gray-600 mb-3">Veja o gasto total de ingredientes em dinheiro e quantidade para o dia anterior.</p>
            <div id="resumo-consumo-diario" class="space-y-2">
                <p class="text-gray-700 font-semibold">Total Gasto: <span id="total-gasto-diario" class="text-blue-600">R$ 0.00</span></p>
                <div id="lista-consumo-diario" class="max-h-40 overflow-y-auto custom-scrollbar border p-2 rounded bg-gray-50">
                    <p class="text-gray-500 text-center">Nenhum consumo registrado para ontem.</p>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-bold mb-4 text-gray-800">üìà Consumo do M√äS ATUAL (<span id="nome-mes-atual">Carregando...</span>)</h3>
            <p class="text-gray-600 mb-3">Acompanhe o gasto total de ingredientes em dinheiro e quantidade para o m√™s.</p>
            <div id="resumo-consumo-mensal" class="space-y-2">
                <p class="text-gray-700 font-semibold">Total Gasto: <span id="total-gasto-mensal" class="text-blue-600">R$ 0.00</span></p>
                <div id="lista-consumo-mensal" class="max-h-40 overflow-y-auto custom-scrollbar border p-2 rounded bg-gray-50">
                    <p class="text-gray-500 text-center">Nenhum consumo registrado para este m√™s.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">A√ß√µes Essenciais e Alertas</h3>
        <p class="text-gray-600 mb-4">Veja o que precisa comprar e resetar o consumo.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <h4 class="text-lg font-semibold mb-3">üö® Ingredientes para Comprar (<span id="ingredientes-ponto-pedido-count">0</span>)</h4>
                <div id="ingredientes-ponto-pedido-list" class="space-y-2 max-h-40 overflow-y-auto custom-scrollbar border p-3 rounded-md bg-red-50">
                    <p class="text-gray-600 text-center">Nenhum ingrediente abaixo do estoque m√≠nimo.</p>
                </div>
            </div>
            <div>
                <button id="btn-resetar-consumo-diario" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 w-full mb-2">
                    üîÑ Resetar Consumo de Ontem (Manualmente)
                </button>
                <p class="text-xs text-gray-500 mb-3 text-center">Geralmente feito no in√≠cio do dia.</p>
                <button id="btn-resetar-consumo-mensal" class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 w-full">
                    üóìÔ∏è Resetar Consumo do M√™s
                </button>
                <p class="text-xs text-gray-500 text-center">Geralmente feito no primeiro dia √∫til do m√™s.</p>
            </div>
        </div>
    </div>

    <div class="bg-gray-200 p-4 rounded-lg shadow-inner text-center mb-6">
        <button id="toggle-gerenciamento-avancado" class="bg-gray-600 text-white px-5 py-2 rounded-md hover:bg-gray-700">
            Mostrar/Esconder Gerenciamento Detalhado
        </button>
    </div>

    <div id="gerenciamento-detalhado-container" class="hidden">
        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h3 class="text-xl font-semibold mb-4 text-gray-700">1. Cadastrar Ingredientes Base</h3>
            <p class="text-gray-600 mb-4">Adicione seus ingredientes, a unidade de medida e o estoque m√≠nimo.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="ingrediente-nome-detalhe" class="block text-sm font-medium text-gray-700">Nome:</label>
                    <input type="text" id="ingrediente-nome-detalhe" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500" placeholder="Ex: Queijo Mu√ßarela">
                </div>
                <div>
                    <label for="ingrediente-unidade-detalhe" class="block text-sm font-medium text-gray-700">Unidade:</label>
                    <input type="text" id="ingrediente-unidade-detalhe" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500" placeholder="Ex: kg, unidade">
                </div>
                <div>
                    <label for="ingrediente-estoque-minimo-detalhe" class="block text-sm font-medium text-gray-700">Estoque M√≠nimo:</label>
                    <input type="number" id="ingrediente-estoque-minimo-detalhe" min="0" step="0.01" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500" placeholder="0.00">
                </div>
                <div class="md:col-span-3">
                    <button id="btn-salvar-ingrediente-detalhe" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 w-full">
                        Salvar Ingrediente Base
                    </button>
                </div>
            </div>

            <div class="mt-8">
                <h4 class="text-lg font-semibold mb-3">Estoque de Ingredientes (Quant. Atual Edit√°vel)</h4>
                <div id="lista-ingredientes-detalhe-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
                    <p class="text-gray-600 col-span-full text-center">Nenhum ingrediente cadastrado.</p>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h3 class="text-xl font-semibold mb-4 text-gray-700">2. Registrar Compra de Ingredientes</h3>
            <p class="text-gray-600 mb-4">Registre as compras para atualizar seu estoque e o custo de cada item.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label for="compra-data-detalhe" class="block text-sm font-medium text-gray-700">Data da Compra:</label>
                    <input type="date" id="compra-data-detalhe" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500">
                </div>
                <div>
                    <label for="compra-fornecedor-detalhe" class="block text-sm font-medium text-gray-700">Fornecedor (Opcional):</label>
                    <input type="text" id="compra-fornecedor-detalhe" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500" placeholder="Ex: Atacad√£o XPTO">
                </div>
            </div>
            <h4 class="text-lg font-semibold mb-3">Itens desta Compra:</h4>
            <div id="itens-compra-detalhe-list" class="space-y-2 mb-4 border p-3 rounded-md bg-gray-50">
                <p class="text-gray-600 text-center">Nenhum item adicionado a esta compra.</p>
            </div>
            <div class="flex flex-wrap items-end gap-3 mb-4">
                <div class="flex-1 min-w-[120px]">
                    <label for="compra-ingrediente-select-detalhe" class="block text-sm font-medium text-gray-700">Ingrediente:</label>
                    <select id="compra-ingrediente-select-detalhe" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        <option value="">Selecione um ingrediente</option>
                    </select>
                </div>
                <div class="flex-1 min-w-[80px]">
                    <label for="compra-quantidade-detalhe" class="block text-sm font-medium text-gray-700">Quantidade:</label>
                    <input type="number" id="compra-quantidade-detalhe" min="0.001" step="0.001" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500" placeholder="0.000">
                </div>
                <div class="flex-1 min-w-[80px]">
                    <label for="compra-preco-total-detalhe" class="block text-sm font-medium text-gray-700">Custo Total do Item (R$):</label>
                    <input type="number" id="compra-preco-total-detalhe" min="0.01" step="0.01" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500" placeholder="Ex: 50.00">
                </div>
                <div class="flex flex-col justify-end">
                    <button id="btn-add-item-compra-detalhe" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                    Adicionar Item
                    </button>
                </div>
                <div class="flex-1 min-w-[150px] flex items-end pb-2">
                    <span id="custo-calculado-display" class="text-sm text-gray-600 font-medium ml-2"></span>
                </div>
            </div>
            <div class="flex justify-end">
                <button id="btn-registrar-compra-detalhe" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 disabled:opacity-50" disabled>
                    Finalizar Registro de Compra
                </button>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h3 class="text-xl font-semibold mb-4 text-gray-700">3. Configurar o que vai em Cada Produto (Receitas)</h3>
            <p class="text-gray-600 mb-4">Aqui voc√™ diz quais ingredientes e qual quantidade exata (para uma por√ß√£o) vai em cada item do seu card√°pio.</p>
            
            <div class="flex flex-wrap items-end gap-4 mb-4">
                <div class="flex-1 min-w-[200px]">
                    <label for="receita-produto-select-categoria-detalhe" class="block text-sm font-medium text-gray-700">Categoria do Produto:</label>
                    <select id="receita-produto-select-categoria-detalhe" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500">
                        <option value="">-- Selecione uma Categoria --</option>
                        <option value="pizzas">Pizzas</option>
                        <option value="bebidas">Bebidas</option>
                        <option value="esfirras">Esfirras</option>
                        <option value="calzone">Calzones</option>
                        <option value="promocoes">Promo√ß√µes</option>
                        <option value="novidades">Novidades</option>
                    </select>
                </div>
                <div class="flex-1 min-w-[200px]">
                    <label for="receita-produto-select-detalhe" class="block text-sm font-medium text-gray-700">Selecionar Produto:</label>
                    <select id="receita-produto-select-detalhe" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500" disabled>
                        <option value="">Selecione uma categoria primeiro</option>
                    </select>
                </div>
                <div class=" min-w-[150px]" id="pizza-size-select-container-detalhe">
                    <label for="pizza-tamanho-select-detalhe" class=" text-sm font-medium text-gray-700">Tamanho da Pizza:</label>
                    <select id="pizza-tamanho-select-detalhe" class="mt-1  w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500">
                        <option value="Grande">Grande</option>
                        <option value="Broto">Broto</option>
                    </select>
                </div>
            </div>

            <div id="receita-config-detalhe-container" class="border p-4 rounded-md bg-gray-50 hidden">
                <h4 class="text-lg font-semibold mb-3">Receita para <span id="current-recipe-product-name-detalhe" class="text-blue-700"></span><span id="current-pizza-size-detalhe" class="ml-2 text-gray-500"></span></h4>
                <div id="ingredientes-para-receita-detalhe-list" class="space-y-2 mb-4">
                    <p class="text-gray-600">Nenhum ingrediente adicionado a esta receita.</p>
                </div>
                <div class="flex flex-wrap items-end gap-3">
                    <div class="flex-1 min-w-[120px]">
                        <label for="receita-ingrediente-select-detalhe" class="block text-sm font-medium text-gray-700">Ingrediente:</label>
                        <select id="receita-ingrediente-select-detalhe" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                            <option value="">Selecione um ingrediente</option>
                        </select>
                    </div>
                    <div class="flex-1 min-w-[80px]">
                        <label for="receita-quantidade-detalhe" class="block text-sm font-medium text-gray-700">Quant. Usada (por 1 unid.):</label>
                        <input type="number" id="receita-quantidade-detalhe" min="0.001" step="0.001" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="0.000">
                    </div>
                    <button id="btn-add-ingrediente-receita-detalhe" class="mt-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                        Adicionar Ingrediente
                    </button>
                </div>
                <div class="flex justify-end mt-4">
                    <button id="btn-salvar-receita-detalhe" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 disabled:opacity-50" disabled>
                        Salvar Receita
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="gerenciamento-detalhado-container" class="">
    <div id="aba-adicionais-conteudo" class="hidden bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">4. Gerenciar Adicionais para Pizzas</h3>
        <p class="text-gray-600 mb-4">Defina quais ingredientes podem ser adicionados √†s pizzas como opcionais e seus respectivos custos extras.</p>

        <div id="lista-adicionais-configuracao" class="space-y-4">
            <p class="text-gray-600 text-center">Carregando adicionais...</p>
        </div>
    </div>
    </div>

    <div id="addon-recipe-modal" class="fixed inset-0 z-[1000] hidden items-center justify-center bg-black/60 p-4">
    <div class="bg-white rounded-2xl w-full max-w-lg p-6 shadow-xl overflow-y-auto max-h-[90vh]">
        <h3 class="text-xl font-bold mb-4 text-gray-800">Receita do Adicional: <span id="addon-recipe-name" class="text-blue-700"></span></h3>

        <div class="space-y-2 mb-4" id="addon-recipe-ingredients-list">
            <p class="text-gray-600">Nenhum ingrediente nesta receita.</p>
        </div>

        <div class="flex flex-wrap items-end gap-3 mb-4">
            <div class="flex-1 min-w-[120px]">
                <label for="addon-recipe-ingrediente-select" class="block text-sm font-medium text-gray-700">Ingrediente:</label>
                <select id="addon-recipe-ingrediente-select" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                    <option value="">Selecione um ingrediente</option>
                </select>
            </div>
            <div class="flex-1 min-w-[80px]">
                <label for="addon-recipe-quantidade" class="block text-sm font-medium text-gray-700">Quant. Usada (por 1 unid. adicional):</label>
                <input type="number" id="addon-recipe-quantidade" min="0.001" step="0.001" class="mt-1 block w-full p-2 border border-gray-300 rounded-md" placeholder="0.000">
            </div>
            <button id="btn-add-addon-recipe-ingrediente" class="mt-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                Adicionar
            </button>
        </div>

        <div class="flex justify-end gap-3 mt-6">
            <button id="cancel-addon-recipe-modal" class="px-4 py-2 border border-gray-400 rounded-md text-gray-700">Cancelar</button>
            <button id="save-addon-recipe-modal" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">Salvar Receita do Adicional</button>
        </div>
    </div>
</div>



    </div>
</body>

</html>