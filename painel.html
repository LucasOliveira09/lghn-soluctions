<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" sizes="16k16" href="assets/icon.jpg">
    <title>Painel Bonanza</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="painel.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Adicione estilos para a transi√ß√£o da sidebar */
        .sidebar {
            transition: transform 0.3s ease-out;
        }

        .overlay {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(2px);
        }

        .table-card {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .table-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .table-status-free {
            background-color: #d1fae5; /* Green-100 */
            border-color: #34d399; /* Green-500 */
        }

        .table-status-occupied {
            background-color: #fee2e2; /* Red-100 */
            border-color: #ef4444; /* Red-500 */
        }
        /* Custom scrollbar for some sections */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>

<body id="tudoSome" class="bg-gray-100 min-h-screen flex">
    <div id="overlay" class="fixed inset-0 bg-black-200 z-40 hidden"></div>

    <div id="sidebar"
        class="fixed top-0 left-0 w-64 h-full bg-blue-800 text-white z-50 transform -translate-x-full lg:translate-x-0 overflow-y-auto shadow-lg p-4 flex flex-col">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">Menu</h2>
            <button id="close-sidebar-button" class="lg:hidden text-white text-xl">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div id="menu-buttons" class="flex flex-col gap-3">
            <button id="btn-ativos"
                class="py-3 px-4 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition w-full text-left">
                <i class="fas fa-clipboard-list mr-2"></i> Pedidos Ativos
            </button>

            <button id="btn-finalizados"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-check-circle mr-2"></i> Pedidos Finalizados
            </button>

            <button id="btn-editar-cardapio"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-edit mr-2"></i> Editar Card√°pio
            </button>

            <button id="btn-editar-horario"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-clock mr-2"></i> Editar Hor√°rio
            </button>

            <button id="btn-gerenciar-mesas"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-chair mr-2"></i> Gerenciar Mesas
            </button>

            <button id="btn-configuracoes-gerais"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-cog mr-2"></i> Configura√ß√µes Gerais
            </button>

            <button id="btn-relatorios"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fas fa-chart-line mr-2"></i> Relat√≥rios
            </button>

            <!--Add Cupom -->
            <button id="btn-gerenciar-cupom"
                class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
                <i class="fa-solid fa-ticket-simple"></i> Gerenciar Cupons
            </button>

            <button id="btn-gerenciar-estoque"
    class="py-3 px-4 rounded-lg bg-blue-700 text-white font-semibold hover:bg-blue-600 transition w-full text-left">
    <i class="fas fa-warehouse mr-2"></i> Gerenciar Estoque
</button>
        </div>
    </div>

    <div class="flex-1 lg:ml-64 p-4 sm:p-6 flex flex-col">
        <div class="max-w-7xl w-full mx-auto">
            <div class="flex items-center justify-between mb-8 gap-4">
                <button id="menu-button" class="lg:hidden text-blue-700 text-3xl">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="text-3xl sm:text-4xl font-bold text-blue-700 text-center sm:text-left flex-1">
                    Painel de Pedidos
                </h1>
                <audio id="notificacao-som" src="assets/notificacao.mp3" preload="auto"></audio>
            </div>

            <div id="aba-ativos">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">Pedidos
                    Ativos</h2>
                <div id="pedidos-ativos-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3"></div>
            </div>

            <div id="modal-editar-pedido"
                class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6 relative mx-4 overflow-y-auto max-h-[90vh]">
                    <h2 class="text-xl font-bold mb-4">Editar Pedido <span id="modal-pedido-id"></span></h2>

                    <div id="modal-itens" class="space-y-2 mb-4 border p-2 rounded"></div>

                    <div class="bg-gray-100 p-3 rounded mt-4">
                        <h3 class="font-medium mb-2">Adicionar novo item</h3>
                        <div class="flex flex-col md:flex-row gap-2 mb-2">
                            <input id="novo-item-nome" type="text" placeholder="Nome do produto"
                                class="flex-1 border p-2 rounded" />
                            <input id="novo-item-preco" type="number" min="0" step="0.01"
                                placeholder="Pre√ßo unit√°rio" class="w-28 border p-2 rounded" />
                            <input id="novo-item-quantidade" type="number" min="0" value="1"
                                class="w-24 border p-2 rounded text-center" />
                        </div>
                        <button id="btn-adicionar-item"
                            class="bg-blue-500 text-white px-4 py-2 rounded w-full mt-2">+ Adicionar Item</button>
                    </div>

                    <div class="flex justify-end gap-2 mt-6">
                        <button type="button" onclick="fecharModalEditarPedido()"
                            class="bg-gray-400 text-white px-4 py-2 rounded">Cancelar</button>
                        <button id="btn-salvar-pedido" class="bg-green-600 text-white px-4 py-2 rounded">Salvar
                            Altera√ß√µes</button>
                    </div>
                </div>
            </div>

            <div id="aba-finalizados" class="hidden">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
                    Relat√≥rio de Pedidos Finalizados</h2>

                <div class="flex flex-col sm:flex-row gap-4 mb-6">
                    <div class="flex flex-col flex-1">
                        <span class="font-medium text-sm mb-1">De:</span>
                        <input type="date" id="data-inicio"
                            class="border rounded px-4 py-2 focus:ring-2 ring-blue-400 w-full" />
                    </div>
                    <div class="flex flex-col flex-1">
                        <span class="font-medium text-sm mb-1">At√©:</span>
                        <input type="date" id="data-fim"
                            class="border rounded px-4 py-2 focus:ring-2 ring-blue-400 w-full" />
                    </div>
                    <button id="btn-filtrar"
                        class="bg-blue-600 text-white px-6 py-2 mt-2 sm:mt-0 rounded-lg font-semibold hover:bg-blue-700 w-full sm:w-auto">Filtrar</button>
                </div>

                <div
                    class="bg-white p-4 rounded-lg shadow-md flex flex-col sm:flex-row justify-between text-lg font-medium mb-6">
                    <p><strong>Total de pedidos:</strong> <span id="total-pedidos">0</span></p>
                    <p><strong>Total vendido:</strong> R$ <span id="total-vendido">0.00</span></p>
                </div>

                <div id="pedidos-finalizados-container"
                    class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3">

                </div>
            </div>

            <div id="promocoes" class="hidden">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
                    Adicionar Promo√ß√µes</h2>

                <form id="promoForm" class="bg-white shadow-md rounded-xl p-4 space-y-4 border border-gray-200 mb-8">
                    <h2 class="text-lg font-bold text-gray-800 mb-2">Adicionar Nova Promo√ß√£o</h2>

                    <div>
                        <label for="titulo">T√≠tulo</label>
                        <input type="text" id="titulo" class="w-full p-3 border rounded" required>
                    </div>

                    <div>
                        <label for="descricao">Descri√ß√£o</label>
                        <textarea id="descricao" class="w-full p-3 border rounded" required></textarea>
                    </div>

                    <div>
                        <label for="imagemUrl">URL da Imagem</label>
                        <input type="text" id="imagemUrl" class="w-full p-2 border rounded"
                            placeholder="https://exemplo.com/imagem.jpg" required>
                        <img id="imagemPreview" class="mt-2 max-h-40 rounded border hidden" />
                    </div>

                    <div>
                        <label for="preco">Pre√ßo</label>
                        <input type="" id="preco" class="w-full p-3 border rounded" required>
                    </div>

                    <button type="submit" class="bg-green-600 text-white py-2 px-4 rounded">Salvar Promo√ß√£o</button>
                </form>


                <div id="modal-editar"
                    class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                    <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-4 sm:p-6 relative mx-4">
                        <h2 class="text-lg font-bold mb-4">Editar Promo√ß√£o</h2>
                        <form id="form-editar" class="space-y-3">
                            <input type="text" id="edit-titulo" class="w-full border p-2 rounded" placeholder="T√≠tulo"
                                required>
                            <textarea id="edit-descricao" class="w-full border p-2 rounded" placeholder="Descri√ß√£o"
                                required></textarea>
                            <div>
                                <label for="imagemUrl" class="block text-sm font-medium mb-1">URL da Imagem</label>
                                <input type="text" id="imagemUrl" class="w-full p-2 border rounded"
                                    placeholder="https://exemplo.com/imagem.jpg" required>
                                <img id="imagemPreview" class="mt-2 max-h-40 rounded border hidden"
                                    alt="Preview da imagem" />
                            </div>
                            <input type="file" id="edit-imagemUpload" accept="image/*"
                                class="w-full p-2 border rounded focus:ring-2 ring-green-500">
                            <img id="preview-edit-imagem" src="" class="max-h-32 mt-2 rounded hidden"
                                alt="Preview da imagem" />
                            <input type="number" id="edit-preco" class="w-full border p-2 rounded" placeholder="Pre√ßo"
                                required>
                            <div class="flex justify-end gap-2 mt-4">
                                <button type="button" onclick="fecharModal()"
                                    class="bg-gray-400 text-white px-4 py-2 rounded">Cancelar</button>
                                <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded">Salvar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="editar-cardapio" class="hidden bg-gray-100 p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2 border-gray-300">Edi√ß√£o de Itens do
                    Card√°pio</h2>

                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                    <button onclick="mostrarNovoitem()" id="btn-adicionar-item-cardapio"
                        class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-3 rounded font-semibold transition">
                        + Adicionar Novo Item
                    </button>

                    <div class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
                        <div class="w-full sm:w-auto">
                            <label for="categoria-select" class="block text-sm font-medium text-gray-700 mb-1">Escolha
                                a categoria:</label>
                            <select id="categoria-select"
                                class="w-full sm:w-64 p-2 border rounded focus:ring-2 ring-blue-400 transition">
                                <option value="pizzas">Pizzas</option>
                                <option value="bebidas">Bebidas</option>
                                <option value="esfirras">Esfirras</option>
                                <option value="calzone">Calzones</option>
                                <option value="promocoes">üî• Promo√ß√µes</option>
                                <option value="novidades">‚ú® Novidades</option>
                            </select>
                        </div>
                        <div class="w-full sm:w-auto">
                            <label for="search-input" class="block text-sm font-medium text-gray-700 mb-1">Pesquisar
                                item:</label>
                            <input type="text" id="search-input" placeholder="Buscar por nome ou descri√ß√£o..."
                                class="w-full sm:w-64 p-2 border rounded focus:ring-2 ring-blue-400 transition" />
                        </div>
                    </div>
                </div>

                <div id="modal-novo-item"
                    class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                    <div class="bg-white p-6 rounded-xl shadow-xl w-full max-w-md mx-4">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Adicionar Novo Item</h2>

                        <div class="space-y-4">
                            <div>
                                <label for="novo-nome"
                                    class="block font-medium text-sm text-gray-700 mb-1">Nome</label>
                                <input id="novo-nome" type="text"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500"
                                    placeholder="Nome do produto" />
                            </div>

                            <div>
                                <label for="novo-descricao"
                                    class="block font-medium text-sm text-gray-700 mb-1">Descri√ß√£o</label>
                                <textarea id="novo-descricao"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500" rows="3"
                                    placeholder="Descri√ß√£o do produto"></textarea>
                            </div>

                            <div>
                                <label for="novo-preco"
                                    class="block font-medium text-sm text-gray-700 mb-1">Pre√ßo</label>
                                <input id="novo-preco" type="number" step="0.01" min="0"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500" placeholder="0.00" />
                            </div>

                            <div>
                                <label for="novo-imagem" class="block font-medium text-sm text-gray-700 mb-1">URL da
                                    Imagem</label>
                                <input id="novo-imagem" type="text"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500"
                                    placeholder="https://..." />
                                <img id="preview-nova-imagem" class="w-full h-32 object-cover mt-2 rounded border hidden" />
                            </div>

                            <div>
                                <label for="novo-tipo"
                                    class="block font-medium text-sm text-gray-700 mb-1">Tipo</label>
                                <select id="novo-tipo"
                                    class="w-full border rounded p-2 focus:ring-2 ring-blue-500">
                                    <option value="salgado">Salgado</option>
                                    <option value="doce">Doce</option>
                                </select>
                            </div>

                            <div class="flex items-center">
                                <input type="checkbox" id="novo-ativo" class="form-checkbox text-blue-600" checked />
                                <label for="novo-ativo" class="ml-2 text-sm text-gray-700">Ativo</label>
                            </div>

                            <div class="flex justify-between pt-4 border-t mt-4">
                                <button id="btn-fechar-novo-item"
                                    class="bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded transition">
                                    Fechar
                                </button>
                                <button id="btn-salvar-novo-item"
                                    class="bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded font-semibold transition">
                                    Salvar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="itens-cardapio-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 "></div>
            </div>

            <div id="editar-horario" class="hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2 border-gray-300">Edi√ß√£o de Hor√°rio de
                    Funcionamento</h2>

                <div class="max-w-2xl mx-auto mt-10 p-6 bg-white rounded shadow">
                    <h1 class="text-2xl font-bold mb-4">Configurar Hor√°rio de Funcionamento</h1>
                    <p class="mb-4 text-gray-700" id="status">Carregando status...</p>

                    <form id="horario-form" class="space-y-4">
                        <div id="dias-container" class="space-y-3"></div>

                        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                            Salvar hor√°rios
                        </button>
                    </form>
                </div>
            </div>

            <div id="aba-gerenciar-mesas" class="hidden">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
                    Gerenciar Mesas para Atendimento Presencial</h2>

                <div class="mb-6">
                    <label for="num-mesas" class="block text-sm font-medium text-gray-700 mb-2">N√∫mero de Mesas (1 a 20):</label>
                    <div class="flex gap-2">
                        <input type="number" id="num-mesas" min="1" max="20" value="10"
                            class="w-24 p-2 border rounded-md focus:ring-blue-500 focus:border-blue-500">
                        <button id="btn-configurar-mesas" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                            Configurar Mesas
                        </button>
                    </div>
                </div>

                <div id="mesas-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    </div>
            </div>

            <div id="modal-mesa-detalhes" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg w-full max-w-4xl p-6 relative mx-4 overflow-y-auto max-h-[90vh]">
                    <h2 class="text-2xl font-bold mb-4">Mesa <span id="modal-mesa-numero"></span> - Fechar Conta</h2>
                    <button type="button" class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-3xl" onclick="fecharModalMesaDetalhes()">
                        <i class="fas fa-times"></i>
                    </button>

                    <div id="mesa-detalhes-info" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700 mb-6">
                        <p><strong>Status:</strong> <span id="mesa-detalhes-status" class="font-semibold"></span></p>
                        <p><strong>Cliente:</strong> <span id="mesa-detalhes-cliente"></span></p>
                        <p><strong>Gar√ßom:</strong> <span id="mesa-detalhes-garcom"></span></p>
                        <p class="md:col-span-2"><strong>Observa√ß√µes:</strong> <span id="mesa-detalhes-obs"></span></p>
                    </div>

                    <hr class="my-4">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Itens Pendentes:</h3>
                            <div id="mesa-itens-selecao-container" class="space-y-3 mb-4 border p-3 rounded-md bg-gray-50 max-h-80 overflow-y-auto custom-scrollbar">
                                <p class="text-gray-500 text-center" id="empty-items-message">Todos os itens foram pagos ou n√£o h√° itens no pedido.</p>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold mb-3">Detalhes do Pagamento:</h3>
                            <div class="bg-blue-50 p-4 rounded-md mb-4 border border-blue-200">
                                <p class="text-lg font-bold text-blue-800">Total Original da Mesa: <span id="mesa-total-original">R$ 0.00</span></p>
                                <p class="text-lg font-bold text-green-600">Total J√° Pago: <span id="mesa-total-pago">R$ 0.00</span></p>
                                <p class="text-lg font-bold text-red-600">Restante a Pagar: <span id="mesa-restante-pagar">R$ 0.00</span></p>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <label for="valor-a-pagar-input" class="block text-sm font-medium text-gray-700">Valor desta Parcela:</label>
                                    <input type="number" id="valor-a-pagar-input" min="0" step="0.01" placeholder="R$ 0.00"
                                           class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-lg font-bold text-blue-700">
                                </div>
                                <div class="flex gap-2">
                                    <input type="number" id="dividir-por-input" min="1" placeholder="N¬∫ Pessoas"
                                           class="flex-1 mt-1 block p-2 border border-gray-300 rounded-md">
                                    <button id="btn-dividir-restante" class="px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50" disabled>
                                        Dividir
                                    </button>
                                </div>
                                <div>
                                    <label for="pagamento-metodo-atual" class="block text-sm font-medium text-gray-700">M√©todo de Pagamento:</label>
                                    <select id="pagamento-metodo-atual" class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                                        <option value="">Selecione...</option>
                                        <option value="Pix">Pix</option>
                                        <option value="Cart√£o">Cart√£o</option>
                                        <option value="Dinheiro">Dinheiro</option>
                                    </select>
                                </div>
                                <div id="troco-input-group" class="hidden">
                                    <label for="troco-recebido" class="block text-sm font-medium text-gray-700">Valor Recebido (para troco):</label>
                                    <input type="number" id="troco-recebido" min="0" step="0.01" placeholder="Ex: 50.00"
                                        class="mt-1 block w-full p-2 border border-gray-300 rounded-md">
                                </div>
                                <button id="btn-adicionar-pagamento" class="px-5 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 w-full disabled:opacity-50" disabled>
                                    <i class="fas fa-cash-register mr-2"></i> Adicionar Pagamento
                                </button>
                            </div>

                            <h3 class="text-xl font-semibold mt-6 mb-3">Hist√≥rico de Pagamentos:</h3>
                            <div id="historico-pagamentos" class="space-y-2 mb-4 border p-3 rounded-md bg-gray-50 max-h-40 overflow-y-auto custom-scrollbar">
                                <p class="text-gray-500 text-center" id="empty-payments-message">Nenhum pagamento registrado.</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center gap-3 mt-6 border-t pt-4">
                        <button id="btn-cancelar-pedido-mesa" class="px-5 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 font-bold">
                            <i class="fas fa-ban mr-2"></i> Cancelar Pedido
                        </button>
                        <button id="btn-finalizar-conta-mesa" class="px-5 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-bold disabled:opacity-50" disabled>
                            <i class="fas fa-check-circle mr-2"></i> Finalizar Conta
                        </button>
                    </div>
                </div>
            </div>

            
            <div id="aba-configuracoes-gerais" class="hidden">
                
            </div>

            <div id="aba-relatorios" class="hidden">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
                    Relat√≥rios de Vendas</h2>

                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h3 class="text-lg font-semibold mb-4 text-gray-700">Filtro de Per√≠odo</h3>
                    <div class="flex flex-wrap items-end gap-4 mb-4">
                        <div class="flex-1 min-w-[150px]">
                            <label for="relatorio-data-inicio" class="block text-sm font-medium text-gray-700">Data
                                In√≠cio:</label>
                            <input type="date" id="relatorio-data-inicio"
                                class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="flex-1 min-w-[150px]">
                            <label for="relatorio-data-fim" class="block text-sm font-medium text-gray-700">Data
                                Fim:</label>
                            <input type="date" id="relatorio-data-fim"
                                class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <button id="btn-gerar-relatorios"
                            class="mt-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Gerar Relat√≥rios
                        </button>
                    </div>

                    <div class="flex flex-wrap gap-2 mt-4">
                        <button id="btn-hoje"
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Hoje</button>
                        <button id="btn-ultimos-7-dias"
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimos 7
                            Dias</button>
                        <button id="btn-ultimo-mes"
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimo M√™s</button>
                        <button id="btn-ultimos-3-meses"
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">√öltimos 3
                            Meses</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700">Top Produtos Vendidos</h3>
                        <div id="top-produtos-summary" class="mb-4 text-gray-800"></div>
                        <div class="relative h-80">
                            <canvas id="top-produtos-chart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700">Vendas por Dia da Semana</h3>
                        <div id="vendas-por-dia-summary" class="mb-4 text-gray-800"></div>
                        <div class="relative h-80">
                            <canvas id="vendas-por-dia-chart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700">Hor√°rios de Pico</h3>
                        <div id="horarios-pico-summary" class="mb-4 text-gray-800"></div>
                        <div class="relative h-80">
                            <canvas id="horarios-pico-chart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700">M√©todos de Pagamento</h3>
                        <div id="metodos-pagamento-summary" class="mb-4 text-gray-800"></div>
                        <div class="relative h-80">
                            <canvas id="metodos-pagamento-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!--Cupons-->
            <div id="aba-gerenciar-cupom" class="hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2 border-gray-300">Editar Cupons</h2>
                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">Cadastrar Novo Cupom</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="cupom-codigo" class="block text-sm font-medium text-gray-700">C√≥digo do Cupom:</label>
                            <input type="text" id="cupom-codigo" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 uppercase-input" placeholder="EX: DESCONTO">
                        </div>
                        <div>
                            <label for="cupom-valor" class="block text-sm font-medium text-gray-700">Valor do Desconto (% ou R$):</label>
                            <input type="number" id="cupom-valor" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="10.00">
                        </div>
                        <div>
                            <label for="cupom-tipo" class="block text-sm font-medium text-gray-700">Tipo de Desconto:</label>
                            <select id="cupom-tipo" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                <option value="porcentagem">Porcentagem (%)</option>
                                <option value="valor">Valor Fixo (R$)</option>
                            </select>
                        </div>
                        <div>
                            <label for="cupom-min-valor" class="block text-sm font-medium text-gray-700">Valor M√≠nimo do Pedido (opcional):</label>
                            <input type="number" id="cupom-min-valor" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" placeholder="Ex 10.00">
                        </div>
                        <div>
                            <label for="validade-cupom" class="block text-sm font-medium text-gray-700">Validade do Cupom:</label>
                            <input type="date" id="validade-cupom" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" placeholder="00/00/0000">
                        </div>
                    </div>
                    <div class="flex justify-end mt-4">
                        <button id="btn-salvar-cupom" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700">
                            Salvar Cupom
                        </button>
                    </div>
                </div>

                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">Cupons Cadastrados</h3>
                    <div id="lista-cupons-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3"></div>
                </div>
            </div>

            <div id="aba-gerenciar-estoque" class="hidden">
    <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-700 border-b pb-2 border-gray-300">
        Estoque do Restaurante
    </h2>

    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">1. Gerenciar Ingredientes Base</h3>
        <p class="text-gray-600 mb-4">Adicione seus ingredientes, a unidade de medida e o estoque m√≠nimo para ser alertado quando estiver acabando. O estoque atual √© ajustado pelas suas compras.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
                <label for="ingrediente-nome" class="block text-sm font-medium text-gray-700">Nome do Ingrediente:</label>
                <input type="text" id="ingrediente-nome" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" placeholder="Ex: Queijo Mu√ßarela">
            </div>
            <div>
                <label for="ingrediente-unidade" class="block text-sm font-medium text-gray-700">Unidade de Medida:</label>
                <input type="text" id="ingrediente-unidade" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" placeholder="Ex: kg, unidade, litro">
            </div>
            <div>
                <label for="ingrediente-estoque-minimo" class="block text-sm font-medium text-gray-700">Estoque M√≠nimo:</label>
                <input type="number" id="ingrediente-estoque-minimo" min="0" step="0.01" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" placeholder="0.00">
            </div>
            <div class="md:col-span-3">
                <button id="btn-salvar-ingrediente" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 w-full">
                    Salvar Ingrediente Base
                </button>
            </div>
        </div>

        <div class="mt-8">
            <h4 class="text-lg font-semibold mb-3">Seus Ingredientes e Estoque Atual:</h4>
            <div id="lista-ingredientes-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
                <p class="text-gray-600 col-span-full text-center">Nenhum ingrediente cadastrado.</p>
            </div>
        </div>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">2. Registrar Compra de Ingredientes</h3>
        <p class="text-gray-600 mb-4">Registre as compras de ingredientes para atualizar seu estoque. O pre√ßo que voc√™ informa aqui ajuda a calcular o custo do seu prato!</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
                <label for="compra-data" class="block text-sm font-medium text-gray-700">Data da Compra:</label>
                <input type="date" id="compra-data" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500">
            </div>
            <div>
                <label for="compra-fornecedor" class="block text-sm font-medium text-gray-700">Fornecedor (Opcional):</label>
                <input type="text" id="compra-fornecedor" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" placeholder="Ex: Atacad√£o XPTO">
            </div>
        </div>
        <h4 class="text-lg font-semibold mb-3">Itens desta Compra:</h4>
        <div id="itens-compra-list" class="space-y-2 mb-4 border p-3 rounded-md bg-gray-50">
            <p class="text-gray-600 text-center">Nenhum item adicionado a esta compra.</p>
        </div>
        <div class="flex flex-wrap items-end gap-3 mb-4">
            <div class="flex-1 min-w-[120px]">
                <label for="compra-ingrediente-select" class="block text-sm font-medium text-gray-700">Ingrediente:</label>
                <select id="compra-ingrediente-select" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                    <option value="">Selecione um ingrediente</option>
                </select>
            </div>
            <div class="flex-1 min-w-[80px]">
                <label for="compra-quantidade" class="block text-sm font-medium text-gray-700">Quantidade:</label>
                <input type="number" id="compra-quantidade" min="0.001" step="0.001" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" placeholder="0.000">
            </div>
            <div class="flex-1 min-w-[80px]">
                <label for="compra-preco-unitario" class="block text-sm font-medium text-gray-700">Pre√ßo Unit√°rio (R$):</label>
                <input type="number" id="compra-preco-unitario" min="0.01" step="0.01" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" placeholder="0.00">
            </div>
            <button id="btn-add-item-compra" class="mt-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                Adicionar Item √† Lista
            </button>
        </div>
        <div class="flex justify-end">
            <button id="btn-registrar-compra" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 disabled:opacity-50" disabled>
                Finalizar Registro de Compra
            </button>
        </div>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">3. Configurar o que vai em Cada Produto (Receitas)</h3>
        <p class="text-gray-600 mb-4">Aqui voc√™ diz quais ingredientes e qual quantidade exata (para uma por√ß√£o) vai em cada item do seu card√°pio. Essencial para o c√°lculo do consumo e custo do prato.</p>
        
        <div class="flex flex-wrap items-end gap-4 mb-4">
            <div class="flex-1 min-w-[200px]">
                <label for="receita-produto-select-categoria" class="block text-sm font-medium text-gray-700">Categoria do Produto:</label>
                <select id="receita-produto-select-categoria" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500">
                    <option value="">-- Selecione uma Categoria --</option>
                    <option value="pizzas">Pizzas</option>
                    <option value="bebidas">Bebidas</option>
                    <option value="esfirras">Esfirras</option>
                    <option value="calzone">Calzones</option>
                    <option value="promocoes">Promo√ß√µes</option>
                    <option value="novidades">Novidades</option>
                </select>
            </div>
            <div class="flex-1 min-w-[200px]">
                <label for="receita-produto-select" class="block text-sm font-medium text-gray-700">Selecionar Produto:</label>
                <select id="receita-produto-select" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500" disabled>
                    <option value="">Selecione uma categoria primeiro</option>
                </select>
            </div>
            <div class="flex-1 min-w-[150px]" id="pizza-size-select-container" style="display:none;">
                <label for="pizza-tamanho-select" class="block text-sm font-medium text-gray-700">Tamanho da Pizza:</label>
                <select id="pizza-tamanho-select" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500">
                    <option value="grande">Grande</option>
                    <option value="broto">Broto</option>
                </select>
            </div>
        </div>

        <div id="receita-config-container" class="border p-4 rounded-md bg-gray-50 hidden">
            <h4 class="text-lg font-semibold mb-3">Receita para <span id="current-recipe-product-name" class="text-blue-700"></span><span id="current-pizza-size" class="ml-2 text-gray-500"></span></h4>
            <div id="ingredientes-para-receita-list" class="space-y-2 mb-4">
                <p class="text-gray-600">Nenhum ingrediente adicionado a esta receita.</p>
            </div>
            <div class="flex flex-wrap items-end gap-3">
                <div class="flex-1 min-w-[120px]">
                    <label for="receita-ingrediente-select" class="block text-sm font-medium text-gray-700">Ingrediente:</label>
                    <select id="receita-ingrediente-select" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                        <option value="">Selecione um ingrediente</option>
                    </select>
                </div>
                <div class="flex-1 min-w-[80px]">
                    <label for="receita-quantidade" class="block text-sm font-medium text-gray-700">Quant. Usada (por 1 unid.):</label>
                    <input type="number" id="receita-quantidade" min="0.001" step="0.001" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" placeholder="0.000">
                </div>
                <button id="btn-add-ingrediente-receita" class="mt-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                    Adicionar Ingrediente
                </button>
            </div>
            <div class="flex justify-end mt-4">
                <button id="btn-salvar-receita" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 disabled:opacity-50" disabled>
                    Salvar Receita
                </button>
            </div>
        </div>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">4. Relat√≥rios e An√°lises R√°pidas</h3>
        <p class="text-gray-600 mb-4">Aqui voc√™ v√™ o que precisa comprar e quanto gastou de ingredientes este m√™s.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <h4 class="text-lg font-semibold mb-3">üö® Ingredientes para Comprar (<span id="ingredientes-ponto-pedido-count">0</span>)</h4>
                <div id="ingredientes-ponto-pedido-list" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar border p-3 rounded-md bg-red-50">
                    <p class="text-gray-600 text-center">Nenhum ingrediente abaixo do estoque m√≠nimo.</p>
                </div>
            </div>
            <div>
                <h4 class="text-lg font-semibold mb-3">üìä Consumo de Ingredientes (M√™s Atual)</h4>
                <div id="consumo-ingredientes-container" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar border p-3 rounded-md bg-gray-50">
                    <p class="text-gray-600 text-center">Nenhum consumo registrado ainda.</p>
                </div>
                <div class="mt-4 flex justify-end">
                    <button id="btn-resetar-consumo" class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600">
                        Resetar Consumo Mensal
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
    </div>
</body>

</html>